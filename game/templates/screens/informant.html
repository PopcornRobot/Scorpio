{% extends 'base_new.html' %}
{% load static %}
<!-- {% include "screens/timer.html" %} -->

{% block content %}

    <section id="three" class="no-padding">
        <div class="container-fluid">
            <div class="row no-gutter">

                <br>
                <br>
            
                <h1 class="animated__word text-center" style="color: rgb(216, 122, 46)">Death Alert</h1>
                <h5 class="animated__word_a text-center" style="color: rgb(216, 122, 46)">your life is in danger</h5>
                <img src="{% static "img/un_warning_two.jpg" %}" max width="100%" class="text-center"/>

                <br>
                <br>

            </div>
        </div>
    </section>

    <section class="container-fluid" id="four">
        <div class="row">
            <hr>
            <div class="media wow fadeInRight">
                <div class="media-body media-middle">
                    <p style="color:white">You just received an anonymous package, but you can't make sense of it. Your gut feeling is
                    it's important. You need the help of other detectives but which ones do you trust?</p>
                </div>
            </div>
            <hr>
            <div class="media wow fadeInRight">
                <div class="media-body media-middle">
                    <p style="color:white"><em>GOAL:</em> Create a list of detectives you trust before the timer ends. The bigger the list, the juicier
                    the tip.</p>
                </div>
            </div>
            <hr>
            <div class="media wow fadeIn">
                <div class="media-body media-middle">
                    <p style="color:white"><em>WARNING:</em> If the murderer is on your list, they may kill you. What makes things worse is they
                    are tracking the package, which means...</p>
                </div>
            </div>
            <hr>
            <div class="media wow fadeIn">
                <div class="media-body media-middle">
                    <h4 class="text-center" style="color:red">THEY ARE LOOKING FOR YOU.</h4>
                </div>
            </div>
            <hr>
            <div class="media wow fadeInRight">
                <div class="media-body media-middle">
                    <p style="color:white">If they find you before you submit your list, you and your tip are gone, forever.</p>
                </div>
            </div>
            <hr>
            <div class="media wow fadeIn"> 
                <div class="media-body media-middle">
                    <p style="color:white">The good news is they don't know who you are exactly yet.
                    So donâ€™t disclose your role as the informant to anyone or they will find out.</p>
                </div>
            </div>
            <hr>
            <div class="media wow fadeInRight">
                <div class="media-body media-middle">
                    <h4 class="text-center" style="color:red">TRUST NO ONE.</h4>
                </div>
            </div>
            <hr>
            <div class="media wow fadeIn"> 
                <div class="media-body media-middle">
                    <!-- <p style="color:rgb(104, 100, 100)">*** INSERT FORM CONTROLS TO SUBMIT A LIST OF MULIPLE PEOPLE ***</p> -->
                   
                </div>
            </div>
           
        </div>
    </section>
    
    <div id="divList"></div>
        <ul>
          {% for p in other_players %}
          <li style="list-style-type: none;">
            <button
                id="button-{{ p.id }}" 
                onclick="addToSafeList('{{ p.id }}')"
                style="background-color: darkgray;
                color:black;
                border:none;
                width: 50%;
                position: relative;
                left: 5%;
                margin: 4px 2px">{{ p.name }}</button>
          </li>
          {% endfor %}
        </ul>
        <button onclick="submitSafeList()" 
            style="background-color:white; color:black; position: relative; left: 15%">
            Submit Safe List</button>
    <script>
        let playerId = "{{ player.id }}"
        let safeList = []
        addToSafeList = (id) => {
            console.log("add to safelist", id)
            let button = document.getElementById("button-" + id)
            if(safeList.includes(id)){
                console.log("already in list, remove")
                let index = safeList.indexOf(id)
                safeList.splice(index, 1)
                button.style.backgroundColor = ""
            } else {
                console.log("not in list, add")
                button.style.backgroundColor = "red"
                safeList.push(id)
            }
            // document.getElementById("divList").innerText = safeList
        }
        submitSafeList = () => {
            console.log("submitSafeList2", playerId, safeList)
            const url = "/submitSafeList2/" + playerId + "/" + safeList.toString()
            fetch(url)
        }

        // global variables
    
        // Page load
        document.addEventListener("DOMContentLoaded", () => {
    
            // LettersRandomPlaces({
            // element: ".animated__word",
            // })
    
        }); // page load closing
    
        // Our functions
// **** BM-caused js to crash on page  
        // LettersRandomPlaces({
        //     element: ".animated__text",
    
        //     // delay in ms
        //     start_delay_time: 1000,
    
        //     // or 'random'
        //     delay_type: "sequential",
    
        //     // duration of the animation
        //     animation_duration: 5000,
    
        //     // type: number
        //     force: 200,
    
        //     // direction
        //     direction: ['x', 'y'],
    
        //     // scale text randomly
        //     random_scale: false,
    
        //     // -1 for random
        //     rotate: -1,
        // })
  
    </script>


{% endblock %}


